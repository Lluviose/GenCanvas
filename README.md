<div align="center">

# ğŸ¨ GenCanvas / æ™ºç»˜ç”»å¸ƒ

**é¢å‘ AI æ–‡ç”Ÿå›¾åˆ›ä½œçš„å¯è§†åŒ–æ¢ç´¢å·¥ä½œå°**

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![React](https://img.shields.io/badge/React-18.2-61DAFB?logo=react)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-3178C6?logo=typescript)](https://www.typescriptlang.org/)
[![Vite](https://img.shields.io/badge/Vite-5.0-646CFF?logo=vite)](https://vitejs.dev/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-3.4-06B6D4?logo=tailwindcss)](https://tailwindcss.com/)

### ğŸŒ [åœ¨çº¿ä½“éªŒ Demo](https://lluviose.github.io/GenCanvas/)

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [ä½¿ç”¨æŒ‡å—](#-ä½¿ç”¨æŒ‡å—) â€¢ [æŠ€æœ¯æ¶æ„](#-æŠ€æœ¯æ¶æ„) â€¢ [å¼€å‘è®¡åˆ’](#-å¼€å‘è®¡åˆ’)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

GenCanvas æ˜¯ä¸€æ¬¾å°† AI å›¾åƒç”Ÿæˆè¿‡ç¨‹**å¯è§†åŒ–**çš„åˆ›ä½œå·¥å…·ã€‚å®ƒç”¨**ç”»å¸ƒ + èŠ‚ç‚¹å›¾è°±**çš„æ–¹å¼ï¼ŒæŠŠä¼ ç»Ÿçš„çº¿æ€§å†å²å‡çº§ä¸ºå¯åˆ†å‰ã€å¯å›æº¯ã€å¯æ•´ç†çš„**æ¢ç´¢åœ°å›¾**ã€‚

**æ ¸å¿ƒç†å¿µï¼š** åœ¨æ–‡ç”Ÿå›¾åˆ›ä½œä¸­ï¼ŒPrompt è¿­ä»£éœ€è¦å¤§é‡è¯•é”™ã€‚GenCanvas è®©æ¯ä¸€æ¬¡å°è¯•éƒ½æˆä¸ºå¯è¿½æº¯çš„èŠ‚ç‚¹ï¼Œè®©åˆ›ä½œè·¯å¾„æ¸…æ™°å¯è§ï¼Œè®©ä¼˜è´¨æ–¹æ¡ˆæ²‰æ·€ä¸ºå¯å¤ç”¨èµ„äº§ã€‚

### ğŸ¯ è®¾è®¡ç›®æ ‡

| ç›®æ ‡ | è¯´æ˜ |
|------|------|
| **å¯è§†åŒ–æ¢ç´¢** | ç”»å¸ƒä¸­ç›´æ¥çœ‹åˆ°åˆ†æ”¯ä¸è·¯çº¿ï¼Œå‘Šåˆ«å†—é•¿çš„å†å²åˆ—è¡¨ |
| **é«˜æ•ˆè¿­ä»£** | å¹¶å‘ç”Ÿæˆ + åŒå±å¿«é€Ÿå¯¹æ¯”ï¼ŒåŠ é€Ÿæ¢ç´¢æ•ˆç‡ |
| **ç»“æœç»§æ‰¿** | ä»ä»»æ„èŠ‚ç‚¹/å›¾ç‰‡ç»§ç»­ç”Ÿæˆï¼Œè‡ªç„¶äº§ç”Ÿåˆ†æ”¯æ ‘ |
| **èµ„äº§æ²‰æ·€** | ä¼˜è´¨ Prompt ä¸å›¾ç‰‡å¯æ”¶è—ã€æ ‡ç­¾åŒ–ã€æ£€ç´¢ã€å¤ç”¨ |
| **AI è¾…åŠ©** | è‡ªåŠ¨æ‰“æ ‡ç­¾ã€è¯„åˆ†ã€æ‘˜è¦ï¼Œæ™ºèƒ½æ•´ç†åˆ›ä½œèµ„äº§ |

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ–¼ï¸ ç”»å¸ƒä¸èŠ‚ç‚¹

- **å¤šç”»å¸ƒç®¡ç†**ï¼šæ”¯æŒæ–°å»ºã€é‡å‘½åã€å¤åˆ¶ã€åˆ é™¤ç”»å¸ƒ
- **å¯è§†åŒ–èŠ‚ç‚¹å›¾**ï¼šèŠ‚ç‚¹é—´è¿çº¿å±•ç¤ºçˆ¶å­å…³ç³»ä¸è¿­ä»£è·¯å¾„
- **èŠ‚ç‚¹çŠ¶æ€è¿½è¸ª**ï¼šç©ºé—²/æ’é˜Ÿ/ç”Ÿæˆä¸­/å®Œæˆ/å¤±è´¥çŠ¶æ€ä¸€ç›®äº†ç„¶
- **ç‰ˆæœ¬å†å²**ï¼šåŒèŠ‚ç‚¹å†…ç¼–è¾‘è‡ªåŠ¨è®°å½•å†å²ç‰ˆæœ¬ï¼Œæ”¯æŒä¸€é”®è¿˜åŸ

### ğŸ”€ åˆ†æ”¯ä¸è¿­ä»£

- **ä¸€é”®ç»§ç»­**ï¼šä»ä»»æ„èŠ‚ç‚¹åˆ›å»ºå­èŠ‚ç‚¹å¹¶ç«‹å³ç”Ÿæˆ
- **å¿«é€Ÿå¾®è°ƒ**ï¼šè¾“å…¥å˜åŒ–è¯ï¼ˆå¦‚"æ’ç”»é£/ç‰¹å†™/é›¨å¤œ"ï¼‰å›è½¦å³åˆ†å‰
- **æ‰¹é‡åˆ†å‰**ï¼šå¤šè¡Œè¾“å…¥æ‰¹é‡åˆ›å»ºåˆ†æ”¯ï¼Œæ”¯æŒå¹¶å‘ç”Ÿæˆ
- **å›¾ç‰‡åˆ†æ”¯**ï¼šåŸºäºæŸå¼ ç”Ÿæˆç»“æœç»§ç»­æ¢ç´¢ï¼ˆæ”¯æŒå¤šè½®å¯¹è¯æ¨¡å¼ï¼‰

### ğŸ“¦ èµ„äº§ç®¡ç†

- **å›¾ç‰‡åº“**ï¼šå…¨å±€æ”¶è—ã€æ ‡ç­¾ã€è¯„åˆ†ã€æœç´¢ã€æ’åº
- **æç¤ºè¯åº“**ï¼šä¿å­˜ä¼˜è´¨ Promptï¼Œæ”¯æŒæ ‡ç­¾åŒ–ä¸å¤ç”¨
- **ä¸€é”®å¤ç”¨**ï¼šä»èµ„äº§åº“å‘é€åˆ°ç”»å¸ƒåˆ›å»ºæ–°èŠ‚ç‚¹ç»§ç»­æ¢ç´¢

### ğŸ¤– AI å¢å¼º

- **ç»“æ„åŒ–æç¤ºè¯**ï¼šæ”¯æŒåœ¨æ–‡å­—ä¸­æ’å…¥å‚è€ƒå›¾å¹¶æ·»åŠ æ ‡æ³¨
- **è‡ªåŠ¨åˆ†æ**ï¼šç”Ÿæˆåè‡ªåŠ¨åˆ†ææç¤ºè¯/å›¾ç‰‡ï¼Œäº§å‡ºæ ‡ç­¾ä¸è¯„åˆ†
- **AI å¯¹è¯**ï¼šå¯¹ç”Ÿæˆå›¾ç‰‡å¼€å¯å¯¹è¯æ¨¡å¼ï¼Œè·å–æ”¹è¿›å»ºè®®
- **æ™ºèƒ½æ ‡ç­¾**ï¼šAI è‡ªåŠ¨ä¸ºèµ„äº§æ‰“æ ‡ç­¾ï¼Œæå‡æ£€ç´¢æ•ˆç‡

### ğŸ’¾ æ•°æ®ä¸å¤‡ä»½

- **æœ¬åœ°å­˜å‚¨**ï¼šæ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨ localStorageï¼Œéšç§å®‰å…¨
- **æœ¬åœ°å¯¼å‡º**ï¼šå¯¼å‡ºä¸º JSON æ–‡ä»¶ï¼Œæ”¯æŒåˆå¹¶/æ›¿æ¢å¯¼å…¥
- **WebDAV äº‘å¤‡ä»½**ï¼šæ”¯æŒåšæœäº‘ã€Nextcloud ç­‰äº‘å­˜å‚¨æœåŠ¡

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js** 18.0+
- **npm** æˆ– **pnpm**

### å®‰è£…ä¸è¿è¡Œ

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/Lluviose/GenCanvas.git
cd GenCanvas

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

è®¿é—® `http://localhost:34567` å¼€å§‹ä½¿ç”¨ã€‚

### ç”Ÿäº§æ„å»º

```bash
# æ„å»º
npm run build

# é¢„è§ˆ
npm start
```

### é…ç½® API

1. è®¿é—® `/admin` é¡µé¢
2. å¡«å†™ Gemini API Keyï¼ˆæˆ– OpenAI å…¼å®¹æ¥å£ï¼‰
3. å¯é€‰ï¼šé…ç½®ç‹¬ç«‹çš„åˆ†ææ¨¡å‹ Keyï¼ˆç”¨äº AI æ ‡ç­¾/è¯„åˆ†ï¼‰

> âš ï¸ **å®‰å…¨æç¤º**ï¼šAPI Key ä»…ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨ï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ã€‚

---

## ğŸ“š ä½¿ç”¨æŒ‡å—

### æ ¸å¿ƒæ¦‚å¿µ

| æ¦‚å¿µ | è¯´æ˜ |
|------|------|
| **é¡¹ç›® (Project)** | ç”¨äºç»„ç»‡ä¸åŒä¸»é¢˜çš„åˆ›ä½œå›¾è°± |
| **ç”»å¸ƒ (Canvas)** | ä¸€ä¸ªä¸»é¢˜/ä»»åŠ¡çš„åˆ›ä½œç©ºé—´ï¼Œç”±èŠ‚ç‚¹+è¿çº¿æ„æˆ |
| **èŠ‚ç‚¹ (Node)** | ä¸€æ¬¡å°è¯•çš„æœ€å°å•å…ƒï¼šPrompt + å‚æ•° + ç»“æœ + çŠ¶æ€ |
| **åˆ†æ”¯ (Branch)** | ä»èŠ‚ç‚¹ç»§ç»­ç”Ÿæˆåˆ›å»ºçš„å­èŠ‚ç‚¹ï¼Œç”¨äºæ¢ç´¢æ–¹å‘å˜åŒ– |
| **èµ„äº§ (Assets)** | å…¨å±€å›¾ç‰‡åº“ä¸æç¤ºè¯åº“ï¼Œå¯æœç´¢/æ ‡ç­¾/æ”¶è—/å¤ç”¨ |

### å…¸å‹å·¥ä½œæµ

```
1. åˆ›å»ºèŠ‚ç‚¹ â†’ 2. ç¼–å†™ Prompt â†’ 3. ç”Ÿæˆå›¾ç‰‡ â†’ 4. è¯„ä¼°ç»“æœ
                                              â†“
     â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â† æ»¡æ„ï¼Ÿâ†’ æ”¶è—åˆ°èµ„äº§åº“
                                              â†“ ä¸æ»¡æ„
                                         5. åˆ†æ”¯ç»§ç»­
                                              â†“
                                    è°ƒæ•´ Prompt/é£æ ¼/æ„å›¾
                                              â†“
                                         è¿”å›æ­¥éª¤ 3
```

### é¡µé¢å¯¼èˆª

| è·¯å¾„ | åŠŸèƒ½ |
|------|------|
| `/` | è‡ªåŠ¨é‡å®šå‘åˆ°ä¸Šæ¬¡ç”»å¸ƒ |
| `/projects` | é¡¹ç›®åˆ—è¡¨ |
| `/projects/:id/canvases` | ç”»å¸ƒåˆ—è¡¨ |
| `/projects/:id/canvases/:canvasId` | ç”»å¸ƒå·¥ä½œå° |
| `/gallery` | èµ„äº§åº“ï¼ˆå›¾ç‰‡ + æç¤ºè¯ï¼‰ |
| `/admin` | API é…ç½® |
| `/settings` | åå¥½è®¾ç½® |
| `/backup` | æ•°æ®å¤‡ä»½ |

---

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯ |
|------|------|
| **æ¡†æ¶** | React 18 + TypeScript 5 |
| **æ„å»º** | Vite 5 |
| **çŠ¶æ€ç®¡ç†** | Zustand |
| **ç”»å¸ƒæ¸²æŸ“** | ReactFlow |
| **æ ·å¼** | Tailwind CSS |
| **å›¾æ ‡** | Lucide React |
| **HTTP** | Axios + Fetch API |

### ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ components/          # ç»„ä»¶
â”‚   â”œâ”€â”€ canvas/          # ç”»å¸ƒç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ CustomNode.tsx      # èŠ‚ç‚¹å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx         # å³ä¾§è¯¦æƒ…æ 
â”‚   â”‚   â”œâ”€â”€ PromptPartsEditor.tsx  # ç»“æ„åŒ–æç¤ºè¯ç¼–è¾‘å™¨
â”‚   â”‚   â””â”€â”€ AiChatDialog.tsx    # AI å¯¹è¯å¼¹çª—
â”‚   â””â”€â”€ ui/              # é€šç”¨ UI ç»„ä»¶
â”œâ”€â”€ pages/               # é¡µé¢
â”‚   â”œâ”€â”€ CanvasPage.tsx   # ç”»å¸ƒå·¥ä½œå°
â”‚   â”œâ”€â”€ GalleryPage.tsx  # èµ„äº§åº“
â”‚   â”œâ”€â”€ SettingsPage.tsx # è®¾ç½®
â”‚   â””â”€â”€ ...
â”œâ”€â”€ store/               # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ canvasStore.ts   # ç”»å¸ƒ/èŠ‚ç‚¹/èµ„äº§çŠ¶æ€
â”‚   â”œâ”€â”€ workbenchSettingsStore.ts  # API é…ç½®
â”‚   â””â”€â”€ preferencesStore.ts  # ç”¨æˆ·åå¥½
â”œâ”€â”€ services/            # API æœåŠ¡
â”‚   â”œâ”€â”€ workbenchApi.ts  # Gemini/OpenAI æ¥å£
â”‚   â””â”€â”€ backupService.ts # å¤‡ä»½æœåŠ¡
â”œâ”€â”€ types/               # ç±»å‹å®šä¹‰
â””â”€â”€ lib/                 # å·¥å…·å‡½æ•°
```

### æ•°æ®å­˜å‚¨

æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨ `localStorage`ï¼š

| Key | å†…å®¹ |
|-----|------|
| `photopro:canvas-state:*` | ç”»å¸ƒå¿«ç…§ï¼ˆèŠ‚ç‚¹/è¿çº¿ï¼‰ |
| `photopro:gallery-images` | å…¨å±€å›¾ç‰‡åº“ |
| `photopro:prompt-library` | æç¤ºè¯èµ„äº§åº“ |
| `photopro:workbench-settings` | API é…ç½® |
| `photopro:workbench-preferences` | ç”¨æˆ·åå¥½ |

---

## ğŸ”§ é…ç½®è¯´æ˜

### API é…ç½®ï¼ˆ/adminï¼‰

**Gemini æ¨¡å¼ï¼ˆæ¨èï¼‰**
- Base URL: `https://generativelanguage.googleapis.com`
- Model: `gemini-3-pro-image-preview`
- API Key: ä½ çš„ Gemini API Key

**OpenAI å…¼å®¹æ¨¡å¼**
- æ”¯æŒä»»ä½•å…¼å®¹ OpenAI API çš„æœåŠ¡
- æ³¨æ„ï¼šå›¾ç‰‡ç”ŸæˆåŠŸèƒ½ä»… Gemini æ¨¡å¼æ”¯æŒ

### WebDAV å¤‡ä»½é…ç½®

**åšæœäº‘ç¤ºä¾‹ï¼š**
- æœåŠ¡å™¨ï¼š`https://dav.jianguoyun.com/dav`
- ç”¨æˆ·åï¼šä½ çš„é‚®ç®±
- å¯†ç ï¼šåº”ç”¨å¯†ç ï¼ˆåœ¨ è´¦æˆ·è®¾ç½® â†’ å®‰å…¨é€‰é¡¹ â†’ ç¬¬ä¸‰æ–¹åº”ç”¨ç®¡ç† åˆ›å»ºï¼‰

---

## ğŸ“‹ å¼€å‘è®¡åˆ’

### âœ… å·²å®Œæˆ

- [x] å¤šç”»å¸ƒç®¡ç†ä¸å¯è§†åŒ–èŠ‚ç‚¹å›¾
- [x] åˆ†æ”¯ä¸è¿­ä»£å·¥ä½œæµ
- [x] å›¾ç‰‡åº“ä¸æç¤ºè¯åº“
- [x] AI è‡ªåŠ¨åˆ†æä¸æ ‡ç­¾
- [x] ç»“æ„åŒ–æç¤ºè¯ï¼ˆå›¾æ–‡æ··åˆï¼‰
- [x] å¤šè½®å¯¹è¯ç»§ç»­ç”Ÿæˆ
- [x] ç‰ˆæœ¬å†å²ä¸å›æ»š
- [x] æœ¬åœ°/WebDAV å¤‡ä»½

### ğŸ”œ è®¡åˆ’ä¸­

- [ ] **ç”Ÿæˆè¿›åº¦**ï¼šç»†ç²’åº¦è¿›åº¦æ˜¾ç¤ºï¼ˆç¬¬ N å¼ /æ€»æ•°ï¼‰
- [ ] **ç²¾é€‰åˆé›†**ï¼šå°†å›¾ç‰‡+èŠ‚ç‚¹æ‰“åŒ…ä¸ºå¯å¤ç”¨æ–¹æ¡ˆ
- [ ] **è·¨ç”»å¸ƒæ£€ç´¢**ï¼šå…¨å±€èŠ‚ç‚¹çº§å…¨æ–‡æœç´¢
- [ ] **åˆ†æ”¯å¢å¼º**ï¼šåˆ†æ”¯å‘½åã€æŠ˜å ã€åˆ†ç»„

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºã€‚

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª â­ Starï¼**

Made with â¤ï¸ by [Lluviose](https://github.com/Lluviose)

</div>
